<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <title>
    
      Javascript Bridge &middot; Stacker
    
  </title>

  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="/public/css/custom.css">
  <link rel="stylesheet" href="/public/css/theme.css">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

</head>

<body>
  <nav class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-8">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=""><img src='/assets/logo-nav.png' /></a>
    </div>


    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <!-- <li><a class="" href="/">Home</a></li> -->
<!--  -->
<!--  -->
<!--    -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/custom-actions/">Custom URL Actions</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/custom-buttons/">Custom Navigation Buttons</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/getting-started/">Getting Started</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/html-best-practices/">HTML Best Practices</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/http-extras/">HTTP Extras</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/blog/">Blog</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=" active"><a href="/docs/javascript-bridge/">Javascript Bridge</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/stacker-objc-api/">Obj-C API</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/theming/">Theming Stacker</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/url-structure/">Stacker URL Structure</a></li> -->
<!--      -->
<!--    -->
<!--  -->

  <li class=""><a href="/docs/getting-started/">Getting Started</a></li>
  <li class=""><a href="/docs/url-structure/">Stacker URL Structure</a></li>
  <li class=""><a href="/docs/javascript-bridge/">Javascript Bridge</a></li>
  <li class=""><a href="/docs/custom-buttons/">Custom Navigation Buttons</a></li>
  <li class=""><a href="/docs/theming/">Theming Stacker</a></li>
  <li class=""><a href="/docs/html-best-practices/">HTML Best Practices</a></li>
  <li class=""><a href="/docs/http-extras/">HTTP Extras</a></li>
  <li class=""><a href="/docs/stacker-objc-api/">Obj-C API</a></li>
  <li class=""><a href="/docs/custom-actions/">Custom URL Actions</a></li>
  <li class="divider"></li>
  <li class=""><a href="/blog/">Blog</a></li>


      </ul>
    </div><!-- /.navbar-collapse -->

  </div>
</nav>


<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <div class="markdown-body">
        <h1>Javascript Bridge</h1>
        
        <p>Stacker comes with a Javascript bridge which lets you send messages between Objective-C and Javascript code. Stacker&#39;s bridge is based on the popular <a href="https://github.com/marcuswestin/WebViewJavascriptBridge">WebViewJavascriptBridge</a> project which is also used by Facebook.</p>

<h2 id="setting-up-your-web-app">Setting up your web app</h2>

<p>Always wait for the WebViewJavascriptBridgeReady DOM event:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">document.addEventListener(&#39;WebViewJavascriptBridgeReady&#39;, function(event) {
    var bridge = event.bridge
    bridge.init()

    // Start using the bridge by registering events
}, false)
</code></pre></div>
<h2 id="calling-js-from-objc">Calling JS from ObjC</h2>

<p>To register a handler in Javascript called <code>testJavascriptHandler</code> (and send the response):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">bridge.registerHandler(&#39;testJavascriptHandler&#39;, function(data, responseCallback) {
  log(&#39;ObjC called testJavascriptHandler with&#39;, data)
  var responseData = { &#39;Javascript Says&#39;:&#39;Right back atcha!&#39; }
  log(&#39;JS responding with&#39;, responseData)
  responseCallback(responseData)
})
</code></pre></div>
<p>To call the <code>testJavascriptHandler</code> from your StackerController:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">[myStackerController.bridge callHandler:@&quot;testJavascriptHandler&quot; data:@{ @&quot;foo&quot;:@&quot;before ready&quot; }];
</code></pre></div>
<p>Alternatively you can do something with the callback:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">[myStackerController.bridge callHandler:@&quot;testJavascriptHandler&quot; data:nil responseCallback:^(id responseData) {
    NSLog(@&quot;Responded with: %@&quot;, responseData);
}];
</code></pre></div>
<h2 id="calling-objc-from-js">Calling ObjC from JS</h2>

<p>First register a handler in ObjC, let&#39;s call it <code>testObjcCallback</code>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">[myStackerController.registerHandler:@&quot;testObjcCallback&quot; handler:^(id data, WVJBResponseCallback responseCallback) {
  NSLog(@&quot;testObjcCallback called: %@&quot;, data);
  responseCallback(@&quot;Response from testObjcCallback&quot;);
}];
</code></pre></div>
<p>Now call it from your JS:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">bridge.callHandler(&#39;testObjcCallback&#39;, {&#39;foo&#39;: &#39;bar&#39;}, function(response) {
  log(&#39;JS got response&#39;, response)
})
</code></pre></div>
      </div>
    </div>
    <div class="col-sm-4">
      <ul id="sidebar" class="nav nav-pills nav-stacked">
        <!-- <li><a class="" href="/">Home</a></li> -->
<!--  -->
<!--  -->
<!--    -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/custom-actions/">Custom URL Actions</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/custom-buttons/">Custom Navigation Buttons</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/getting-started/">Getting Started</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/html-best-practices/">HTML Best Practices</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/http-extras/">HTTP Extras</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/blog/">Blog</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=" active"><a href="/docs/javascript-bridge/">Javascript Bridge</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/stacker-objc-api/">Obj-C API</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/theming/">Theming Stacker</a></li> -->
<!--      -->
<!--    -->
<!--  -->
<!--    -->
<!--      -->
<!--       <li class=""><a href="/docs/url-structure/">Stacker URL Structure</a></li> -->
<!--      -->
<!--    -->
<!--  -->

  <li class=""><a href="/docs/getting-started/">Getting Started</a></li>
  <li class=""><a href="/docs/url-structure/">Stacker URL Structure</a></li>
  <li class=""><a href="/docs/javascript-bridge/">Javascript Bridge</a></li>
  <li class=""><a href="/docs/custom-buttons/">Custom Navigation Buttons</a></li>
  <li class=""><a href="/docs/theming/">Theming Stacker</a></li>
  <li class=""><a href="/docs/html-best-practices/">HTML Best Practices</a></li>
  <li class=""><a href="/docs/http-extras/">HTTP Extras</a></li>
  <li class=""><a href="/docs/stacker-objc-api/">Obj-C API</a></li>
  <li class=""><a href="/docs/custom-actions/">Custom URL Actions</a></li>
  <li class="divider"></li>
  <li class=""><a href="/blog/">Blog</a></li>


      </ul>
    </div>
  </div>
</div>

  <footer class="text-center">
  <a href="https://github.com/lokimeyburg/Stacker/blob/master/LICENSE">Licence</a>
  &#183;
  <a href="https://github.com/lokimeyburg/Stacker">Download</a>
  &#183;
  <a href="/docs/getting-started">Documentation</a>
  &#183;
  <a href="https://twitter.com/lokimeyburg">Made with &#9825; by @LokiMeyburg</a>
</footer>


  <script src="/public/scripts/bifrost.js"></script>

<script type="text/javascript">
  $(".navbar-toggle").click(function(e){
    e.preventDefault();
    if($(".navbar-collapse").hasClass("active")){
      $(".navbar-collapse").removeClass("active");
    } else {
      $(".navbar-collapse").addClass("active");
    }
  });
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52626492-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>


